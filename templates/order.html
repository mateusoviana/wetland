{% extends "layout.html" %}

{% block content %}
<section class="max-w-3xl mx-auto py-10">
    <h2 class="text-3xl font-bold text-emerald-800 mb-6">Detalhes do Pedido #{{ order.id }}</h2>

    <div class="bg-white rounded-lg shadow p-6 mb-6">
        <p class="mb-2 text-gray-700">
            <strong>Status:</strong>
            <span class="font-semibold capitalize text-emerald-700 status-{{ order.status.lower() }}">{{ order.status }}</span>
        </p>
        <p class="mb-4 text-gray-700">
            <strong>Total (com frete):</strong>
            R$ {{ "%.2f"|format(order.total_price) }}
        </p>

        <h3 class="text-lg font-semibold text-emerald-700 mb-2">Itens do Pedido:</h3>
        <ul class="list-disc list-inside text-gray-800 space-y-1">
            {% for product_name in order.products %}
                <li>{{ product_name }}</li>
            {% endfor %}
        </ul>
    </div>

    {% if order.status != 'Delivered' %}
    <form action="{{ url_for('next_status', order_id=order.id) }}" method="post">
        <button type="submit" class="px-6 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700">
            Avançar para o Próximo Status
        </button>
    </form>
    {% else %}
    <p class="text-center bg-emerald-100 text-emerald-700 p-4 rounded font-medium">
        🎉 Pedido entregue com sucesso!
    </p>
    {% endif %}

    <div class="mt-6">
        <a href="{{ url_for('index') }}" class="text-emerald-700 hover:underline inline-block">← Voltar para a loja</a>
    </div>
</section>
{% endblock %}
